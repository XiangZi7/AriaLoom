var Ee=Object.defineProperty,ye=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var se=(e,t,s)=>t in e?Ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,g=(e,t)=>{for(var s in t||(t={}))oe.call(t,s)&&se(e,s,t[s]);if(I)for(var s of I(t))re.call(t,s)&&se(e,s,t[s]);return e},w=(e,t)=>ye(e,$e(t));var U=(e,t)=>{var s={};for(var r in e)oe.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&I)for(var r of I(e))t.indexOf(r)<0&&re.call(e,r)&&(s[r]=e[r]);return s};import{r as p}from"./react-ChB3Y10S.js";import{K as Te,ar as ke,p as F,m as Ae,u as we,ae as xe,r as Fe,a as K,x as k,M as Le,L as Me}from"./index-BmcItZo9.js";import{t as Se,p as ae,$ as De,b as ne,c as _e}from"./import-Bb2vmMs8.js";import{u as Ie}from"./index-C1Burefm.js";var x=new WeakMap,d=[];function Ke(e,t=document.body){let s=new Set(e),r=new Set,v=a=>{for(let i of a.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))s.add(i);let n=i=>{const N=i.parentElement;if(s.has(i)||r.has(N)&&N.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let O of s)if(i.contains(O))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},o=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:n}),C=n(a);if(C===NodeFilter.FILTER_ACCEPT&&P(a),C!==NodeFilter.FILTER_REJECT){let i=o.nextNode();for(;i!=null;)P(i),i=o.nextNode()}},P=a=>{var n;let o=(n=x.get(a))!=null?n:0;a.getAttribute("aria-hidden")==="true"&&o===0||(o===0&&a.setAttribute("aria-hidden","true"),r.add(a),x.set(a,o+1))};d.length&&d[d.length-1].disconnect(),v(t);let m=new MutationObserver(a=>{for(let n of a)if(!(n.type!=="childList"||n.addedNodes.length===0)&&![...s,...r].some(o=>o.contains(n.target))){for(let o of n.removedNodes)o instanceof Element&&(s.delete(o),r.delete(o));for(let o of n.addedNodes)(o instanceof HTMLElement||o instanceof SVGElement)&&(o.dataset.liveAnnouncer==="true"||o.dataset.reactAriaTopLayer==="true")?s.add(o):o instanceof Element&&v(o)}});m.observe(t,{childList:!0,subtree:!0});let h={observe(){m.observe(t,{childList:!0,subtree:!0})},disconnect(){m.disconnect()}};return d.push(h),()=>{m.disconnect();for(let a of r){let n=x.get(a);n!=null&&(n===1?(a.removeAttribute("aria-hidden"),x.delete(a)):x.set(a,n-1))}h===d[d.length-1]?(d.pop(),d.length&&d[d.length-1].observe()):d.splice(d.indexOf(h),1)}}function Be(e,t){const S=e,{triggerRef:s,popoverRef:r,showArrow:v,offset:P=7,crossOffset:m=0,scrollRef:h,shouldFlip:a,boundaryElement:n,isDismissable:o=!0,shouldCloseOnBlur:C=!0,placement:i="top",containerPadding:N,shouldCloseOnInteractOutside:O,isNonModal:B,isKeyboardDismissDisabled:W,updatePositionDeps:L=[]}=S,H=U(S,["triggerRef","popoverRef","showArrow","offset","crossOffset","scrollRef","shouldFlip","boundaryElement","isDismissable","shouldCloseOnBlur","placement","containerPadding","shouldCloseOnInteractOutside","isNonModal","isKeyboardDismissDisabled","updatePositionDeps"]),M=B||!0,{overlayProps:V,underlayProps:q}=Te({isOpen:t.isOpen,onClose:t.close,shouldCloseOnBlur:C,isDismissable:o,isKeyboardDismissDisabled:W,shouldCloseOnInteractOutside:O||(G=>{let D=s==null?void 0:s.current;return!D||!D.contains(G)})},r),{overlayProps:f,arrowProps:J,placement:R,updatePosition:j}=ke(w(g({},H),{shouldFlip:a,crossOffset:m,targetRef:s,overlayRef:r,isOpen:t.isOpen,scrollRef:h,boundaryElement:n,containerPadding:N,placement:Se(i),offset:v?P+3:P,onClose:()=>{}}));return Ie(()=>{L.length&&j()},L),p.useEffect(()=>{if(t.isOpen&&!M&&r.current)return Ke([r.current])},[M,t.isOpen,r]),{popoverProps:F(V,f),arrowProps:J,underlayProps:q,placement:R}}function je(e){var t,s;const[r,v]=Ae(e,ae.variantKeys),ee=r,{as:P,children:m,ref:h,state:a,triggerRef:n,scrollRef:o,defaultOpen:C,onOpenChange:i,isOpen:N,isNonModal:O=!0,shouldFlip:B=!0,containerPadding:W=12,shouldBlockScroll:L=!1,isDismissable:H=!0,shouldCloseOnBlur:M,portalContainer:V,updatePositionDeps:q,placement:f="top",triggerType:J="dialog",showArrow:R=!1,offset:j=7,crossOffset:S=0,boundaryElement:G,isKeyboardDismissDisabled:D,shouldCloseOnInteractOutside:le,motionProps:ie,className:ce,classNames:u,onClose:z}=ee,Q=U(ee,["as","children","ref","state","triggerRef","scrollRef","defaultOpen","onOpenChange","isOpen","isNonModal","shouldFlip","containerPadding","shouldBlockScroll","isDismissable","shouldCloseOnBlur","portalContainer","updatePositionDeps","placement","triggerType","showArrow","offset","crossOffset","boundaryElement","isKeyboardDismissDisabled","shouldCloseOnInteractOutside","motionProps","className","classNames","onClose"]),de=P||"div",b=we(h),ue=p.useRef(null),_=p.useRef(!1),A=n||ue,pe=(t=e.disableAnimation)!=null?t:!1,fe=De({isOpen:N,defaultOpen:C,onOpenChange:l=>{i==null||i(l),l||z==null||z()}}),c=a||fe,{popoverProps:X,underlayProps:Y,placement:E}=Be({triggerRef:A,isNonModal:O,popoverRef:b,placement:f,offset:j,scrollRef:o,isDismissable:H,shouldCloseOnBlur:M,boundaryElement:G,crossOffset:S,shouldFlip:B,containerPadding:W,updatePositionDeps:q,isKeyboardDismissDisabled:D,shouldCloseOnInteractOutside:le},c),{triggerProps:y}=xe({type:J},c,A),{isFocusVisible:me,isFocused:be,focusProps:ge}=Fe(),$=p.useMemo(()=>ae(g({},v)),[...Object.values(v)]),ve=K(u==null?void 0:u.base,ce),Pe=(l={})=>w(g({ref:b},F(X,Q,l)),{style:F(X.style,Q.style,l.style)}),he=(l={})=>w(g({"data-slot":"base","data-open":k(c.isOpen),"data-focus":k(be),"data-arrow":k(R),"data-focus-visible":k(me),"data-placement":ne(E,f)},F(ge,l)),{className:$.base({class:K(ve)}),style:{outline:"none"}}),Oe=p.useCallback((l={})=>({"data-slot":"content","data-open":k(c.isOpen),"data-arrow":k(R),"data-placement":ne(E,f),className:$.content({class:K(u==null?void 0:u.content,l.className)})}),[$,c.isOpen,R,E,f,u]),Ce=p.useMemo(()=>_e(E,f)?E:f,[E,f]),Z=p.useCallback(l=>{var T;let te;return l.pointerType==="touch"&&((e==null?void 0:e.backdrop)==="blur"||(e==null?void 0:e.backdrop)==="opaque")?te=setTimeout(()=>{_.current=!0},100):_.current=!0,(T=y.onPress)==null||T.call(y,l),()=>{clearTimeout(te)}},[y==null?void 0:y.onPress]),Ne=p.useCallback((l={},T=null)=>w(g({"data-slot":"trigger","aria-haspopup":"dialog"},F(y,l)),{onPress:Z,className:$.trigger({class:K(u==null?void 0:u.trigger,l.className)}),ref:Le(T,A)}),[c,y,Z,A]),Re=p.useCallback((l={})=>g(g({"data-slot":"backdrop",className:$.backdrop({class:u==null?void 0:u.backdrop}),onClick:T=>{if(!_.current){T.preventDefault();return}c.close(),_.current=!1}},Y),l),[$,c.isOpen,u,Y]);return p.useEffect(()=>{if(c.isOpen&&(b!=null&&b.current))return Me([b==null?void 0:b.current])},[c.isOpen,b]),{state:c,Component:de,children:m,classNames:u,showArrow:R,triggerRef:A,placement:Ce,isNonModal:O,popoverRef:b,portalContainer:V,isOpen:c.isOpen,onClose:c.close,disableAnimation:pe,shouldBlockScroll:L,backdrop:(s=e.backdrop)!=null?s:"transparent",motionProps:ie,getBackdropProps:Re,getPopoverProps:Pe,getTriggerProps:Ne,getDialogProps:he,getContentProps:Oe}}export{je as u};
