import{r as o}from"./react-ClPpOBC1.js";var v=globalThis!=null&&globalThis.document?o.useLayoutEffect:o.useEffect;function S(p={}){const{loading:t,src:n,srcSet:a,onLoad:i,onError:l,crossOrigin:u,sizes:c,ignoreFallback:f}=p,[d,g]=o.useState("pending");o.useEffect(()=>{g(n?"loading":"pending")},[n]);const r=o.useRef(),E=o.useCallback(()=>{if(!n)return;s();const e=new Image;e.src=n,u&&(e.crossOrigin=u),a&&(e.srcset=a),c&&(e.sizes=c),t&&(e.loading=t),e.onload=m=>{s(),g("loaded"),i==null||i(m)},e.onerror=m=>{s(),g("failed"),l==null||l(m)},r.current=e},[n,u,a,c,i,l,t]),s=()=>{r.current&&(r.current.onload=null,r.current.onerror=null,r.current=null)};return v(()=>{if(!f)return d==="loading"&&E(),()=>{s()}},[d,E,f]),f?"loaded":d}export{S as a,v as u};
