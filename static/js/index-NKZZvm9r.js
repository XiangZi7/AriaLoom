import{I as A,H as r,ad as E}from"./index-Dozeaj06.js";import{r as d}from"./react-DURm6eKk.js";import{I as h}from"./iconify-CKIDWxGs.js";import{f as w}from"./format-DPNjUOCl.js";import{a as j}from"./chunk-XBMXQVV7-DJhewNMH.js";import{b as v}from"./chunk-NXTXE2B3-CPhBnlzK.js";function T(n,{threshold:i=.1,root:l=null,rootMargin:f="0px",pageSize:s,initialPageNum:x=1},N){const[u,e]=d.useState(x);return d.useEffect(()=>{if(!n.current)return;const o=new Map,a=new IntersectionObserver(m=>{m.forEach(c=>{const b=c.target;c.isIntersecting&&o.get(b)&&(N(u,s),e(L=>L+1),a.unobserve(b))})},{threshold:i,root:l,rootMargin:f}),t=Array.isArray(n.current)?n.current:[n.current],p=t.length-1;return t.forEach((m,c)=>{m&&(a.observe(m),o.set(m,c===p))}),()=>{a.disconnect(),o.clear()}},[n]),{pageNum:u}}const O=({className:n,SongsData:i,query:l})=>{const[f]=d.useState(!1),s=d.useRef(null),{updateTrackLists:x}=A();T(s,{initialPageNum:1,pageSize:10,threshold:.1},(e,o)=>{l&&l(e,o)});function u(e){E(e.id).then(({data:o})=>{const a={id:e.id,title:e.name,singer:e.ar.map(t=>t.name).join(" / "),album:e.al.name,cover:e.al.picUrl,source:o[0].url,time:e.dt,mv:e.mv};x(a)})}return r.jsxDEV("div",{className:`flex ${n}`,children:r.jsxDEV("div",{className:"flex flex-col flex-1 ",children:[r.jsxDEV("ul",{className:"w-full ",children:i==null?void 0:i.map(e=>r.jsxDEV("li",{ref:s,className:"hover:bg-default-400/20 hover:dark:bg-default-500/30 hover:opacity-80 p-2 mb-2 rounded-xl  flex items-center gap-2 transition-all duration-300 ease-in-out",children:[r.jsxDEV("div",{className:"flex flex-[40%] max-w-[40%] truncate",children:r.jsxDEV("div",{className:"flex gap-2",children:[r.jsxDEV("div",{className:"flex-none w-10 h-10",children:r.jsxDEV(j,{src:e.al.picUrl,alt:e.name,radius:"sm",className:"w-full h-full"},void 0,!1,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:68,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:67,columnNumber:19},void 0),r.jsxDEV("div",{className:"flex flex-col justify-center ",children:[r.jsxDEV("div",{className:"text-small ",children:e.name},void 0,!1,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:73,columnNumber:21},void 0),r.jsxDEV("div",{className:"text-xs text-gray-500 ",children:e.ar.map(o=>o.name).join(" / ")},void 0,!1,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:74,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:71,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:66,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:65,columnNumber:15},void 0),r.jsxDEV("div",{className:"flex flex-[25%] max-w-[25%] truncate text-small",children:e.al.name},void 0,!1,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:80,columnNumber:15},void 0),r.jsxDEV("div",{className:"flex flex-[25%] max-w-[25%] text-small",children:w(e.dt)},void 0,!1,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:81,columnNumber:15},void 0),r.jsxDEV("div",{className:"flex flex-[10%] max-w-[10%] justify-end ",children:[r.jsxDEV(v,{isIconOnly:!0,className:"data-[hover]:bg-foreground/10",radius:"full",variant:"light",onPress:()=>u(e),children:r.jsxDEV(h,{icon:"material-symbols:play-circle-outline",className:"text-2xl"},void 0,!1,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:90,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:83,columnNumber:17},void 0),e.mv!=0&&r.jsxDEV(v,{isIconOnly:!0,className:"data-[hover]:bg-foreground/10",radius:"full",variant:"light",children:r.jsxDEV(h,{icon:"ph:film-strip",className:"text-2xl"},void 0,!1,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:94,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:93,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:82,columnNumber:15},void 0)]},e.id,!0,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:60,columnNumber:13},void 0))},void 0,!1,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:58,columnNumber:9},void 0),r.jsxDEV("div",{className:"m-5",children:f?r.jsxDEV("div",{children:"加载中..."},void 0,!1,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:101,columnNumber:41},void 0):r.jsxDEV("button",{className:"btn",children:"加载更多"},void 0,!1,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:101,columnNumber:61},void 0)},void 0,!1,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:101,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:57,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/work/AriaLoom/AriaLoom/src/components/TablePro/index.tsx",lineNumber:56,columnNumber:5},void 0)};export{O as T};
